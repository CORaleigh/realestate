var __awaiter=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,s){function o(e){try{u(n.next(e))}catch(t){s(t)}}function a(e){try{u(n["throw"](e))}catch(t){s(t)}}function u(e){e.done?r(e.value):i(e.value).then(o,a)}u((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return u([e,t])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:r.label++;return{value:o[1],done:false};case 5:r.label++;i=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(s=r.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){r.label=o[1];break}if(o[0]===6&&r.label<s[1]){r.label=s[1];s=o;break}if(s&&r.label<s[2]){r.label=s[2];r.ops.push(o);break}if(s[2])r.ops.pop();r.trys.pop();continue}o=t.call(e,r)}catch(a){o=[6,a];i=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n};System.register(["./p-7a7fd524.system.js","./p-c737c79a.system.js","./p-a7662e60.system.js"],(function(e){"use strict";var t,r,n,i,s,o,a,u;return{setters:[function(e){t=e.r;r=e.c;n=e.h;i=e.H;s=e.g},function(e){o=e.S;a=e.E},function(e){u=e.g}],execute:function(){var c=e("calcite_switch",function(){function e(e){var n=this;t(this,e);this.switched=false;this.name="";this.value="";this.color="blue";this.scale="m";this.theme="light";this.syncThisToProxyInput=function(){n.switched=n.inputProxy.hasAttribute("checked");n.name=n.inputProxy.name;n.value=n.inputProxy.value};this.syncProxyInputToThis=function(){n.switched?n.inputProxy.setAttribute("checked",""):n.inputProxy.removeAttribute("checked");n.inputProxy.setAttribute("name",n.name);n.inputProxy.setAttribute("value",n.value)};this.calciteSwitchChange=r(this,"calciteSwitchChange",7)}e.prototype.onClick=function(e){if(this.el.closest("label")&&e.target===this.inputProxy||!this.el.closest("label")&&e.target===this.el){this.switched=!this.switched}};e.prototype.keyDownHandler=function(e){if(e.keyCode===o||e.keyCode===a){e.preventDefault();this.switched=!this.switched}};e.prototype.switchWatcher=function(){this.calciteSwitchChange.emit();this.switched?this.inputProxy.setAttribute("checked",""):this.inputProxy.removeAttribute("checked")};e.prototype.connectedCallback=function(){var e=["blue","red"];if(!e.includes(this.color))this.color="blue";var t=["s","m","l"];if(!t.includes(this.scale))this.scale="m";var r=["dark","light"];if(!r.includes(this.theme))this.theme="light";this.setupProxyInput()};e.prototype.disconnectedCallback=function(){this.observer.disconnect()};e.prototype.componentWillRender=function(){this.syncProxyInputToThis()};e.prototype.render=function(){var e=u(this.el);return n(i,{role:"checkbox",dir:e,"aria-checked":this.switched,tabindex:"0"},n("div",{class:"track"},n("div",{class:"handle"})),n("slot",null))};e.prototype.setupProxyInput=function(){this.inputProxy=this.el.querySelector("input");if(!this.inputProxy){this.inputProxy=document.createElement("input");this.inputProxy.type="checkbox";this.syncProxyInputToThis();this.el.appendChild(this.inputProxy)}this.syncThisToProxyInput();{this.observer=new MutationObserver(this.syncThisToProxyInput);this.observer.observe(this.inputProxy,{attributes:true})}};Object.defineProperty(e.prototype,"el",{get:function(){return s(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{switched:["switchWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return":root{--calcite-global-ui-blue:#007ac2;--calcite-global-ui-blue-hover:#2890ce;--calcite-global-ui-blue-pressed:#00619b;--calcite-global-ui-green:#35ac46;--calcite-global-ui-green-hover:#50ba5f;--calcite-global-ui-green-pressed:#288835;--calcite-global-ui-yellow:#edd317;--calcite-global-ui-yellow-hover:#f9e54e;--calcite-global-ui-yellow-pressed:#d9bc00;--calcite-global-ui-red:#d83020;--calcite-global-ui-red-hover:#e65240;--calcite-global-ui-red-pressed:#a82b1e;--calcite-global-ui-background:#f8f8f8;--calcite-global-ui-foreground:#fff;--calcite-global-ui-foreground-hover:#f3f3f3;--calcite-global-ui-foreground-pressed:#eaeaea;--calcite-global-ui-text-1:#151515;--calcite-global-ui-text-2:#4a4a4a;--calcite-global-ui-text-3:#6a6a6a}:host([theme=dark]){--calcite-global-ui-blue-dark:$d-bb-420;--calcite-global-ui-blue-hover-dark:$d-bb-430;--calcite-global-ui-blue-pressed-dark:$d-bb-410;--calcite-global-ui-green-dark:$d-gg-420;--calcite-global-ui-green-hover-dark:$d-gg-430;--calcite-global-ui-green-pressed-dark:$d-gg-410;--calcite-global-ui-yellow-dark:$d-yy-420;--calcite-global-ui-yellow-hover-dark:$d-yy-430;--calcite-global-ui-yellow-pressed-dark:$d-yy-410;--calcite-global-ui-red-dark:$d-rr-420;--calcite-global-ui-red-hover-dark:$d-rr-430;--calcite-global-ui-red-pressed-dark:$d-rr-410;--calcite-global-ui-background-dark:$blk-210;--calcite-global-ui-foreground-dark:$blk-200;--calcite-global-ui-foreground-hover-dark:$blk-190;--calcite-global-ui-foreground-pressed-dark:$blk-180;--calcite-global-ui-text-1-dark:$blk-000;--calcite-global-ui-text-2-dark:$blk-060;--calcite-global-ui-text-3-dark:$blk-090}:host([hidden]){display:none}body{font-family:Avenir Next W01,Avenir Next W00,Avenir Next,Avenir,Helvetica Neue,sans-serif}.overflow-hidden{overflow:hidden}calcite-tab{display:none}calcite-tab[is-active]{display:block}a{color:#007ac2}:host{--calcite-switch-track-background:#f3f3f3;--calcite-switch-track-border:#d4d4d4;--calcite-switch-handle-background:#fff;--calcite-switch-handle-border:#959595;--calcite-switch-hover-handle-border:#2890ce;--calcite-switch-hover-track-background:#eaeaea;--calcite-switch-hover-track-border:#bfbfbf;--calcite-switch-switched-track-background:#2890ce;--calcite-switch-switched-track-border:#00619b;--calcite-switch-switched-handle-border:#007ac2;--calcite-switch-switched-hover-track-background:#007ac2;--calcite-switch-switched-hover-track-border:#2890ce;--calcite-switch-switched-hover-handle-border:#00619b;--calcite-switch-box-shadow-color:hsla(0,0%,45.9%,0.5);--calcite-switch-switched-box-shadow-color:rgba(0,122,194,0.5)}:host([theme=dark]){--calcite-switch-track-background:#353535;--calcite-switch-track-border:#555;--calcite-switch-handle-background:#2b2b2b;--calcite-switch-handle-border:#959595;--calcite-switch-hover-handle-border:#0087d7;--calcite-switch-hover-track-background:#404040;--calcite-switch-hover-track-border:grey;--calcite-switch-switched-track-background:#0087d7;--calcite-switch-switched-track-border:#00a0ff;--calcite-switch-switched-handle-border:#00a0ff;--calcite-switch-switched-hover-track-background:#00a0ff;--calcite-switch-switched-hover-track-border:#00a0ff;--calcite-switch-switched-hover-handle-border:#0087d7;--calcite-switch-switched-box-shadow-color:rgba(0,160,255,0.5)}:host([color=red]){--calcite-switch-switched-track-background:#e65240;--calcite-switch-switched-track-border:#d83020;--calcite-switch-hover-handle-border:#e65240;--calcite-switch-switched-handle-border:#d83020;--calcite-switch-switched-hover-track-background:#d83020;--calcite-switch-switched-hover-track-border:#e65240;--calcite-switch-switched-hover-handle-border:#a82b1e;--calcite-switch-switched-box-shadow-color:rgba(216,48,32,0.5)}:host([theme=dark][color=red]){--calcite-switch-switched-track-background:#f3381b;--calcite-switch-switched-track-border:#fe583e;--calcite-switch-hover-handle-border:#f3381b;--calcite-switch-switched-handle-border:#fe583e;--calcite-switch-switched-hover-track-background:#fe583e;--calcite-switch-switched-hover-track-border:#ff7465;--calcite-switch-switched-hover-handle-border:#ff7465;--calcite-switch-switched-box-shadow-color:rgba(254,88,62,0.5)}:host([scale=s]){--calcite-switch-track-width:28px;--calcite-switch-track-height:16px;--calcite-switch-handle-size:14px}:host([scale=m]){--calcite-switch-track-width:36px;--calcite-switch-track-height:20px;--calcite-switch-handle-size:18px}:host([scale=l]){--calcite-switch-track-width:44px;--calcite-switch-track-height:24px;--calcite-switch-handle-size:22px}::slotted(input){display:none}:host{display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;top:-.1em;tap-highlight-color:transparent;margin-right:.5em}.track{position:relative;display:inline-block;vertical-align:top;width:var(--calcite-switch-track-width);height:var(--calcite-switch-track-height);background-color:var(--calcite-switch-track-background);border-radius:30px;border:1px solid var(--calcite-switch-track-border)}.handle,.track{pointer-events:none;-webkit-transition:all .15s ease-in-out;transition:all .15s ease-in-out}.handle{position:absolute;display:block;width:var(--calcite-switch-handle-size);height:var(--calcite-switch-handle-size);top:-1px;left:-1px;right:auto;background-color:var(--calcite-switch-handle-background);border-radius:30px;border:2px solid var(--calcite-switch-handle-border)}:host(:focus),:host(:hover){outline:none}:host(:focus) .track,:host(:hover) .track{background-color:var(--calcite-switch-hover-track-background);border-color:var(--calcite-switch-hover-track-border);-webkit-box-shadow:0 0 16px 0 rgba(0,0,0,.1);box-shadow:0 0 16px 0 rgba(0,0,0,.1)}:host(:focus) .handle,:host(:hover) .handle{border-color:var(--calcite-switch-hover-handle-border);-webkit-box-shadow:0 0 12px 0 rgba(0,0,0,.05);box-shadow:0 0 12px 0 rgba(0,0,0,.05);right:auto}:host([switched]) .track{background-color:var(--calcite-switch-switched-track-background);border-color:var(--calcite-switch-switched-track-border)}:host([switched]) .handle{right:-1px;left:auto;border-color:var(--calcite-switch-switched-handle-border);-webkit-box-shadow:0 0 12px 0 rgba(0,0,0,.05);box-shadow:0 0 12px 0 rgba(0,0,0,.05)}:host([switched]:focus) .track{-webkit-box-shadow:0 0 6px 1px var(--calcite-switch-switched-box-shadow-color);box-shadow:0 0 6px 1px var(--calcite-switch-switched-box-shadow-color)}:host([switched]:hover) .track{background-color:var(--calcite-switch-switched-hover-track-background);border-color:var(--calcite-switch-switched-hover-track-border)}:host([switched]:hover) .handle{border-color:var(--calcite-switch-switched-hover-handle-border)}:host([dir=rtl]){margin-right:0;margin-left:.5em}:host([dir=rtl]) .handle{left:auto;right:-1px}:host([dir=rtl]:hover) .handle{right:1px;left:auto}:host([dir=rtl][switched]) .handle,:host([dir=rtl][switched]:active) .handle,:host([dir=rtl][switched]:focus) .handle{right:auto;left:-1px}"},enumerable:true,configurable:true});return e}());var l=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function f(e,t){return t={exports:{}},e(t,t.exports),t.exports}var d=f((function(e,t){(function(e,r){r(t)})(l,(function(e){var t="4.13";var r="next";function n(e){if(e.toLowerCase()===r){return r}var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function i(e){if(e===void 0){e=t}return"https://js.arcgis.com/"+e+"/"}function s(e){if(e===void 0){e=t}var s=i(e);var o=n(e);if(o!==r&&o.major===3){var a=o.minor<=10?"js/":"";return""+s+a+"esri/css/esri.css"}else{return s+"esri/themes/light/main.css"}}function o(e){var t=document.createElement("link");t.rel="stylesheet";t.href=e;return t}function a(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else{document.head.appendChild(e)}}function u(e){return document.querySelector('link[href*="'+e+'"]')}function c(e){return!e||n(e)?s(e):e}function l(e,t){var r=c(e);var n=u(r);if(!n){n=o(r);a(n,t)}return n}var h=typeof window!=="undefined";var f={Promise:h?window["Promise"]:undefined};var d={};function p(e){var t=document.createElement("script");t.type="text/javascript";t.src=e;t.setAttribute("data-esri-loader","loading");return t}function y(e,t,r){var n;if(r){n=v(e,r)}var i=function(){t(e);e.removeEventListener("load",i,false);if(n){e.removeEventListener("error",n,false)}};e.addEventListener("load",i,false)}function v(e,t){var r=function(n){t(n.error||new Error("There was an error attempting to load "+e.src));e.removeEventListener("error",r,false)};e.addEventListener("error",r,false);return r}function g(e){if(e===void 0){e={}}d=e}function w(){return document.querySelector("script[data-esri-loader]")}function m(){var e=window["require"];return e&&e.on}function b(e){if(e===void 0){e={}}var t={};[d,e].forEach((function(e){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){t[r]=e[r]}}}));var r=t.version;var n=t.url||i(r);return new f.Promise((function(e,i){var s=w();if(s){var o=s.getAttribute("src");if(o!==n){i(new Error("The ArcGIS API for JavaScript is already loaded ("+o+")."))}else{if(m()){e(s)}else{y(s,e,i)}}}else{if(m()){i(new Error("The ArcGIS API for JavaScript is already loaded."))}else{var a=t.css;if(a){var u=a===true;l(u?r:a,t.insertCssBefore)}if(t.dojoConfig){window["dojoConfig"]=t.dojoConfig}s=p(n);y(s,(function(){s.setAttribute("data-esri-loader","loaded");e(s)}),i);document.body.appendChild(s)}}}))}function x(e){return new f.Promise((function(t,r){var n=window["require"].on("error",r);window["require"](e,(function(){var e=[];for(var r=0;r<arguments.length;r++){e[r]=arguments[r]}n.remove();t(e)}))}))}function P(e,t){if(t===void 0){t={}}if(!m()){var r=w();var n=r&&r.getAttribute("src");if(!t.url&&n){t.url=n}return b(t).then((function(){return x(e)}))}else{return x(e)}}var S={getScript:w,isLoaded:m,loadModules:P,loadScript:b,loadCss:l,setDefaultOptions:g,utils:f};e.getScript=w;e.isLoaded=m;e.loadModules=P;e.loadScript=b;e.loadCss=l;e.setDefaultOptions=g;e.utils=f;e["default"]=S;Object.defineProperty(e,"__esModule",{value:true})}))}));h(d);var p=d.loadModules;var y=d.loadCss;var v=e("material_table",function(){function e(e){t(this,e);this.extent=JSON.stringify({xmin:-78.6443,ymin:35.7746,xmax:-78.6304,ymax:35.7812,spatialReference:{wkid:4326}});this.appId=null;this.extentChecked=false;this.headers=[];this.features=[];this.count=0;this.layer=null;this.ascending=true;this.cnt=0;this.lastScrollLeft=0;this.rowSelected=r(this,"rowSelected",7)}e.prototype.fieldsWatchHandler=function(){var e=this;this.headers=[];this.layer.fields.forEach((function(t){if(e.fields.split(",").includes(t.name)){t.ascending=false;t.sorting=false;e.headers.push(t)}}));this.headers=__spreadArrays(this.headers)};e.prototype.extentWatchHandler=function(){if(this.extentChecked){this.cnt=0;this.features=[];var e=this.headers.filter((function(e){return e.sorting}));var t=null;if(e.length){t=e[0]}this.queryFeatures(t)}};e.prototype.watchHandler=function(){this.cnt=0;this.features=[];var e=this.headers.filter((function(e){return e.sorting}));var t=null;if(e.length){t=e[0]}this.queryFeatures(t)};e.prototype.queryFeatures=function(e){return __awaiter(this,void 0,void 0,(function(){var t,r,n,i,s;var o=this;return __generator(this,(function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,p(["esri/geometry/Extent"])];case 1:t=a.sent()[0];r=["OBJECTID"];this.layer.fields.forEach((function(e){if(o.fields.split(",").includes(e.name)){r.push(e.name)}}));n={where:this.where,outFields:r,num:25};if(e){this.headers.forEach((function(t){t.sorting=t.name===e.name}));n["orderByFields"]=e.name;if(!e.ascending){n["orderByFields"]+=" DESC"}}n["start"]=this.cnt*25;i=null;if(this.extentChecked){i=t.fromJSON(JSON.parse(this.extent));n["geometry"]=t.fromJSON(JSON.parse(this.extent))}this.layer.queryFeatureCount({where:this.where,geometry:i}).then((function(e){o.count=e}));this.layer.queryFeatures(n).then((function(e){o.features=__spreadArrays(o.features.concat(e.features))}));return[3,3];case 2:s=a.sent();console.log("EsriLoader: ",s);return[3,3];case 3:return[2]}}))}))};e.prototype.initializeArcGIS=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,n,i,s,o;var a=this;return __generator(this,(function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);return[4,p(["esri/layers/FeatureLayer","esri/identity/OAuthInfo","esri/identity/IdentityManager"])];case 1:e=u.sent(),t=e[0],r=e[1],n=e[2];console.log(this.appId);if(this.appId){i=new r({appId:"IBzkn4XKa7OGFvYs",popup:false});n.registerOAuthInfos([i]);console.log(n)}s=new t({portalItem:{id:this.itemId},layerId:this.layerId});s.load().then((function(){a.layer=s;a.layer.fields.forEach((function(e){if(a.fields.split(",").includes(e.name)){e.ascending=false;e.sorting=false;a.headers.push(e)}}));a.queryFeatures(null)}));return[3,3];case 2:o=u.sent();console.log("EsriLoader: ",o);return[3,3];case 3:return[2]}}))}))};e.prototype.componentDidLoad=function(){this.initializeArcGIS();y("https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/css/calcite-web.min.css")};e.prototype.tableScrolled=function(e){var t=e.target;if(t.scrollTop+t.clientHeight>=t.scrollHeight){this.cnt+=1;var r=this.headers.filter((function(e){return e.sorting}));var n=null;if(r.length){n=r[0]}this.queryFeatures(n)}};e.prototype.sortFeatures=function(e){var t=this;this.ascending=!this.ascending;this.features=__spreadArrays(this.features.sort((function(r,n){var i=r.attributes[e];var s=n.attributes[e];if(!i){i=""}if(!s){s=""}if(i<s){return t.ascending?-1:1}if(i>s){return t.ascending?1:-1}return 0})))};e.prototype.extentChanged=function(e){console.log(e.target.checked);this.extentChecked=e.target.checked;this.cnt=0;this.count=0;this.features=[];this.queryFeatures(null)};e.prototype.render=function(){var e=this;return n("div",{id:"tableDiv",class:"overflow-auto",onScroll:function(){e.tableScrolled(event)}},n("table",{id:"table",class:"table table-striped modifier-class"},n("thead",{class:"header"},n("tr",null,this.headers.map((function(t){return n("th",{onClick:function(){t.ascending=!t.ascending;e.cnt=0;e.features=[];e.queryFeatures(t)},role:"columnheader",scope:"col"},t.alias,t.sorting?n("span",{class:"sort-icon"},t.ascending?n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"svg-icon"},n("path",{d:"M4 23v-5L16 6l12 12v5L16 11 4 23z"})):n("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"svg-icon"},n("path",{d:"M28 9v5L16 26 4 14V9l12 12L28 9z"}))):n("div",null))})))),n("tbody",null,this.features.map((function(t){return n("tr",{onClick:function(){return e.rowSelected.emit(t)}},e.headers.map((function(e){return n("td",null,t.attributes[e.name]&&e.type==="date"?new Date(t.attributes[e.name]).toLocaleDateString("en-US"):t.attributes[e.name])})))})))),n("footer",{class:"footer"},this.features.length," of ",this.count," features",n("label",null," ",n("calcite-switch",{onChange:function(){return e.extentChanged(event)}})," Filter By Extent")))};Object.defineProperty(e,"watchers",{get:function(){return{fields:["fieldsWatchHandler"],extent:["extentWatchHandler"],where:["watchHandler"]}},enumerable:true,configurable:true});Object.defineProperty(e,"style",{get:function(){return"#tableDiv{overflow:auto;height:100%}body,html{width:100%;height:100%}.sort-icon{margin-left:.5em}th{background:#efefef;position:-webkit-sticky;position:sticky;top:0}td,th{overflow-wrap:break-word;white-space:normal;font-size:.775rem}.table td,.table th{min-width:100px}.header{background:#fff;position:-webkit-sticky;position:sticky;top:0;-webkit-box-shadow:0 2px 2px -1px rgba(0,0,0,.4);box-shadow:0 2px 2px -1px rgba(0,0,0,.4)}.footer{background:#fff;position:absolute;bottom:0;left:0;right:0;padding:.5em!important;font-size:.775rem;border:1px solid #ccc}input[type=checkbox]{display:none}label{float:right;margin:0!important}"},enumerable:true,configurable:true});return e}())}}}));