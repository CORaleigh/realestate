import{r as t,c as e,h as i,H as s,g as r}from"./p-443359a0.js";import{S as n,E as a}from"./p-32b30282.js";import{g as h}from"./p-790f957d.js";const o=class{constructor(i){t(this,i),this.switched=!1,this.name="",this.value="",this.color="blue",this.scale="m",this.theme="light",this.syncThisToProxyInput=()=>{this.switched=this.inputProxy.hasAttribute("checked"),this.name=this.inputProxy.name,this.value=this.inputProxy.value},this.syncProxyInputToThis=()=>{this.switched?this.inputProxy.setAttribute("checked",""):this.inputProxy.removeAttribute("checked"),this.inputProxy.setAttribute("name",this.name),this.inputProxy.setAttribute("value",this.value)},this.calciteSwitchChange=e(this,"calciteSwitchChange",7)}onClick(t){(this.el.closest("label")&&t.target===this.inputProxy||!this.el.closest("label")&&t.target===this.el)&&(this.switched=!this.switched)}keyDownHandler(t){t.keyCode!==n&&t.keyCode!==a||(t.preventDefault(),this.switched=!this.switched)}switchWatcher(){this.calciteSwitchChange.emit(),this.switched?this.inputProxy.setAttribute("checked",""):this.inputProxy.removeAttribute("checked")}connectedCallback(){["blue","red"].includes(this.color)||(this.color="blue"),["s","m","l"].includes(this.scale)||(this.scale="m"),["dark","light"].includes(this.theme)||(this.theme="light"),this.setupProxyInput()}disconnectedCallback(){this.observer.disconnect()}componentWillRender(){this.syncProxyInputToThis()}render(){const t=h(this.el);return i(s,{role:"checkbox",dir:t,"aria-checked":this.switched,tabindex:"0"},i("div",{class:"track"},i("div",{class:"handle"})),i("slot",null))}setupProxyInput(){this.inputProxy=this.el.querySelector("input"),this.inputProxy||(this.inputProxy=document.createElement("input"),this.inputProxy.type="checkbox",this.syncProxyInputToThis(),this.el.appendChild(this.inputProxy)),this.syncThisToProxyInput(),this.observer=new MutationObserver(this.syncThisToProxyInput),this.observer.observe(this.inputProxy,{attributes:!0})}get el(){return r(this)}static get watchers(){return{switched:["switchWatcher"]}}static get style(){return":root{--calcite-global-ui-blue:#007ac2;--calcite-global-ui-blue-hover:#2890ce;--calcite-global-ui-blue-pressed:#00619b;--calcite-global-ui-green:#35ac46;--calcite-global-ui-green-hover:#50ba5f;--calcite-global-ui-green-pressed:#288835;--calcite-global-ui-yellow:#edd317;--calcite-global-ui-yellow-hover:#f9e54e;--calcite-global-ui-yellow-pressed:#d9bc00;--calcite-global-ui-red:#d83020;--calcite-global-ui-red-hover:#e65240;--calcite-global-ui-red-pressed:#a82b1e;--calcite-global-ui-background:#f8f8f8;--calcite-global-ui-foreground:#fff;--calcite-global-ui-foreground-hover:#f3f3f3;--calcite-global-ui-foreground-pressed:#eaeaea;--calcite-global-ui-text-1:#151515;--calcite-global-ui-text-2:#4a4a4a;--calcite-global-ui-text-3:#6a6a6a}:host([theme=dark]){--calcite-global-ui-blue-dark:$d-bb-420;--calcite-global-ui-blue-hover-dark:$d-bb-430;--calcite-global-ui-blue-pressed-dark:$d-bb-410;--calcite-global-ui-green-dark:$d-gg-420;--calcite-global-ui-green-hover-dark:$d-gg-430;--calcite-global-ui-green-pressed-dark:$d-gg-410;--calcite-global-ui-yellow-dark:$d-yy-420;--calcite-global-ui-yellow-hover-dark:$d-yy-430;--calcite-global-ui-yellow-pressed-dark:$d-yy-410;--calcite-global-ui-red-dark:$d-rr-420;--calcite-global-ui-red-hover-dark:$d-rr-430;--calcite-global-ui-red-pressed-dark:$d-rr-410;--calcite-global-ui-background-dark:$blk-210;--calcite-global-ui-foreground-dark:$blk-200;--calcite-global-ui-foreground-hover-dark:$blk-190;--calcite-global-ui-foreground-pressed-dark:$blk-180;--calcite-global-ui-text-1-dark:$blk-000;--calcite-global-ui-text-2-dark:$blk-060;--calcite-global-ui-text-3-dark:$blk-090}:host([hidden]){display:none}body{font-family:Avenir Next W01,Avenir Next W00,Avenir Next,Avenir,Helvetica Neue,sans-serif}.overflow-hidden{overflow:hidden}calcite-tab{display:none}calcite-tab[is-active]{display:block}a{color:#007ac2}:host{--calcite-switch-track-background:#f3f3f3;--calcite-switch-track-border:#d4d4d4;--calcite-switch-handle-background:#fff;--calcite-switch-handle-border:#959595;--calcite-switch-hover-handle-border:#2890ce;--calcite-switch-hover-track-background:#eaeaea;--calcite-switch-hover-track-border:#bfbfbf;--calcite-switch-switched-track-background:#2890ce;--calcite-switch-switched-track-border:#00619b;--calcite-switch-switched-handle-border:#007ac2;--calcite-switch-switched-hover-track-background:#007ac2;--calcite-switch-switched-hover-track-border:#2890ce;--calcite-switch-switched-hover-handle-border:#00619b;--calcite-switch-box-shadow-color:hsla(0,0%,45.9%,0.5);--calcite-switch-switched-box-shadow-color:rgba(0,122,194,0.5)}:host([theme=dark]){--calcite-switch-track-background:#353535;--calcite-switch-track-border:#555;--calcite-switch-handle-background:#2b2b2b;--calcite-switch-handle-border:#959595;--calcite-switch-hover-handle-border:#0087d7;--calcite-switch-hover-track-background:#404040;--calcite-switch-hover-track-border:grey;--calcite-switch-switched-track-background:#0087d7;--calcite-switch-switched-track-border:#00a0ff;--calcite-switch-switched-handle-border:#00a0ff;--calcite-switch-switched-hover-track-background:#00a0ff;--calcite-switch-switched-hover-track-border:#00a0ff;--calcite-switch-switched-hover-handle-border:#0087d7;--calcite-switch-switched-box-shadow-color:rgba(0,160,255,0.5)}:host([color=red]){--calcite-switch-switched-track-background:#e65240;--calcite-switch-switched-track-border:#d83020;--calcite-switch-hover-handle-border:#e65240;--calcite-switch-switched-handle-border:#d83020;--calcite-switch-switched-hover-track-background:#d83020;--calcite-switch-switched-hover-track-border:#e65240;--calcite-switch-switched-hover-handle-border:#a82b1e;--calcite-switch-switched-box-shadow-color:rgba(216,48,32,0.5)}:host([theme=dark][color=red]){--calcite-switch-switched-track-background:#f3381b;--calcite-switch-switched-track-border:#fe583e;--calcite-switch-hover-handle-border:#f3381b;--calcite-switch-switched-handle-border:#fe583e;--calcite-switch-switched-hover-track-background:#fe583e;--calcite-switch-switched-hover-track-border:#ff7465;--calcite-switch-switched-hover-handle-border:#ff7465;--calcite-switch-switched-box-shadow-color:rgba(254,88,62,0.5)}:host([scale=s]){--calcite-switch-track-width:28px;--calcite-switch-track-height:16px;--calcite-switch-handle-size:14px}:host([scale=m]){--calcite-switch-track-width:36px;--calcite-switch-track-height:20px;--calcite-switch-handle-size:18px}:host([scale=l]){--calcite-switch-track-width:44px;--calcite-switch-track-height:24px;--calcite-switch-handle-size:22px}::slotted(input){display:none}:host{display:inline-block;position:relative;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;top:-.1em;tap-highlight-color:transparent;margin-right:.5em}.track{position:relative;display:inline-block;vertical-align:top;width:var(--calcite-switch-track-width);height:var(--calcite-switch-track-height);background-color:var(--calcite-switch-track-background);border-radius:30px;border:1px solid var(--calcite-switch-track-border)}.handle,.track{pointer-events:none;-webkit-transition:all .15s ease-in-out;transition:all .15s ease-in-out}.handle{position:absolute;display:block;width:var(--calcite-switch-handle-size);height:var(--calcite-switch-handle-size);top:-1px;left:-1px;right:auto;background-color:var(--calcite-switch-handle-background);border-radius:30px;border:2px solid var(--calcite-switch-handle-border)}:host(:focus),:host(:hover){outline:none}:host(:focus) .track,:host(:hover) .track{background-color:var(--calcite-switch-hover-track-background);border-color:var(--calcite-switch-hover-track-border);-webkit-box-shadow:0 0 16px 0 rgba(0,0,0,.1);box-shadow:0 0 16px 0 rgba(0,0,0,.1)}:host(:focus) .handle,:host(:hover) .handle{border-color:var(--calcite-switch-hover-handle-border);-webkit-box-shadow:0 0 12px 0 rgba(0,0,0,.05);box-shadow:0 0 12px 0 rgba(0,0,0,.05);right:auto}:host([switched]) .track{background-color:var(--calcite-switch-switched-track-background);border-color:var(--calcite-switch-switched-track-border)}:host([switched]) .handle{right:-1px;left:auto;border-color:var(--calcite-switch-switched-handle-border);-webkit-box-shadow:0 0 12px 0 rgba(0,0,0,.05);box-shadow:0 0 12px 0 rgba(0,0,0,.05)}:host([switched]:focus) .track{-webkit-box-shadow:0 0 6px 1px var(--calcite-switch-switched-box-shadow-color);box-shadow:0 0 6px 1px var(--calcite-switch-switched-box-shadow-color)}:host([switched]:hover) .track{background-color:var(--calcite-switch-switched-hover-track-background);border-color:var(--calcite-switch-switched-hover-track-border)}:host([switched]:hover) .handle{border-color:var(--calcite-switch-switched-hover-handle-border)}:host([dir=rtl]){margin-right:0;margin-left:.5em}:host([dir=rtl]) .handle{left:auto;right:-1px}:host([dir=rtl]:hover) .handle{right:1px;left:auto}:host([dir=rtl][switched]) .handle,:host([dir=rtl][switched]:active) .handle,:host([dir=rtl][switched]:focus) .handle{right:auto;left:-1px}"}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var c,l,d=(function(t){var e="4.13",i="next";function s(t){if(t.toLowerCase()===i)return i;var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function r(t){return void 0===t&&(t=e),"https://js.arcgis.com/"+t+"/"}function n(t,n){var a=function(t){return!t||s(t)?function(t){void 0===t&&(t=e);var n=r(t),a=s(t);return a!==i&&3===a.major?n+(a.minor<=10?"js/":"")+"esri/css/esri.css":n+"esri/themes/light/main.css"}(t):t}(t),h=function(t){return document.querySelector('link[href*="'+t+'"]')}(a);return h||function(t,e){if(e){var i=document.querySelector(e);i.parentNode.insertBefore(t,i)}else document.head.appendChild(t)}(h=function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}(a),n),h}var a={Promise:"undefined"!=typeof window?window.Promise:void 0},h={};function o(t,e,i){var s;i&&(s=function(t,e){var i=function(s){e(s.error||new Error("There was an error attempting to load "+t.src)),t.removeEventListener("error",i,!1)};return t.addEventListener("error",i,!1),i}(t,i));var r=function(){e(t),t.removeEventListener("load",r,!1),s&&t.removeEventListener("error",s,!1)};t.addEventListener("load",r,!1)}function c(t){void 0===t&&(t={}),h=t}function l(){return document.querySelector("script[data-esri-loader]")}function d(){var t=window.require;return t&&t.on}function u(t){void 0===t&&(t={});var e={};[h,t].forEach((function(t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}));var i=e.version,s=e.url||r(i);return new a.Promise((function(t,r){var a=l();if(a){var h=a.getAttribute("src");h!==s?r(new Error("The ArcGIS API for JavaScript is already loaded ("+h+").")):d()?t(a):o(a,t,r)}else if(d())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var c=e.css;c&&n(!0===c?i:c,e.insertCssBefore),e.dojoConfig&&(window.dojoConfig=e.dojoConfig),o(a=function(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}(s),(function(){a.setAttribute("data-esri-loader","loaded"),t(a)}),r),document.body.appendChild(a)}}))}function f(t){return new a.Promise((function(e,i){var s=window.require.on("error",i);window.require(t,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];s.remove(),e(t)}))}))}function w(t,e){if(void 0===e&&(e={}),d())return f(t);var i=l(),s=i&&i.getAttribute("src");return!e.url&&s&&(e.url=s),u(e).then((function(){return f(t)}))}var v={getScript:l,isLoaded:d,loadModules:w,loadScript:u,loadCss:n,setDefaultOptions:c,utils:a};t.getScript=l,t.isLoaded=d,t.loadModules=w,t.loadScript=u,t.loadCss=n,t.setDefaultOptions=c,t.utils=a,t.default=v,Object.defineProperty(t,"__esModule",{value:!0})}((c={exports:{}}).exports),c.exports);(l=d)&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default");var u=d.loadModules,f=d.loadCss;const w=class{constructor(i){t(this,i),this.extent=JSON.stringify({xmin:-78.6443,ymin:35.7746,xmax:-78.6304,ymax:35.7812,spatialReference:{wkid:4326}}),this.appId=null,this.extentChecked=!1,this.headers=[],this.features=[],this.count=0,this.layer=null,this.ascending=!0,this.cnt=0,this.rowSelected=e(this,"rowSelected",7)}extentWatchHandler(){this.cnt=0,this.features=[];let t=this.headers.filter(t=>t.sorting),e=null;t.length&&(e=t[0]),this.queryFeatures(e)}watchHandler(){this.cnt=0,this.features=[];let t=this.headers.filter(t=>t.sorting),e=null;t.length&&(e=t[0]),this.queryFeatures(e)}async queryFeatures(t){try{const[e]=await u(["esri/geometry/Extent"]);let i=[];this.layer.fields.forEach(t=>{i.push(t.name)});let s={where:this.where,outFields:i,num:25};t&&(this.headers.forEach(e=>{e.sorting=e.name===t.name}),s.orderByFields=t.name,t.ascending||(s.orderByFields+=" DESC")),s.start=25*this.cnt;let r=null;this.extentChecked&&(r=e.fromJSON(JSON.parse(this.extent)),s.geometry=e.fromJSON(JSON.parse(this.extent))),this.layer.queryFeatureCount({where:this.where,geometry:r}).then(t=>{this.count=t,console.log(t)}),this.layer.queryFeatures(s).then(t=>{this.features=[...this.features.concat(t.features)]})}catch(e){console.log("EsriLoader: ",e)}}async initializeArcGIS(){try{const[t,e,i]=await u(["esri/layers/FeatureLayer","esri/identity/OAuthInfo","esri/identity/IdentityManager"]);if(console.log(this.appId),this.appId){const t=new e({appId:"IBzkn4XKa7OGFvYs",popup:!1});i.registerOAuthInfos([t]),console.log(i)}let s=new t({portalItem:{id:this.itemId},layerId:this.layerId});s.load().then(()=>{this.layer=s,this.layer.fields.forEach(t=>{t.ascending=!1,t.sorting=!1,this.headers.push(t)}),this.queryFeatures(null)})}catch(t){console.log("EsriLoader: ",t)}}componentDidLoad(){this.initializeArcGIS(),f("https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/css/calcite-web.min.css")}tableScrolled(){let t=document.getElementById("tableDiv");if(console.log(t.scrollTop+t.clientHeight),console.log(t.scrollHeight),t.scrollTop+t.clientHeight>=t.scrollHeight){this.cnt+=1;let t=this.headers.filter(t=>t.sorting),e=null;t.length&&(e=t[0]),this.queryFeatures(e)}}sortFeatures(t){this.ascending=!this.ascending,this.features=[...this.features.sort((e,i)=>{var s=e.attributes[t],r=i.attributes[t];return s||(s=""),r||(r=""),s<r?this.ascending?-1:1:s>r?this.ascending?1:-1:0})]}extentChanged(t){console.log(t.target.checked),this.extentChecked=t.target.checked,this.cnt=0,this.count=0,this.features=[],this.queryFeatures(null)}render(){return i("div",{id:"tableDiv",class:"overflow-auto",onScroll:()=>{this.tableScrolled()}},i("table",{class:"table table-striped modifier-class"},i("thead",{class:"header"},i("tr",null,this.headers.map(t=>i("th",{onClick:()=>{t.ascending=!t.ascending,this.cnt=0,this.features=[],this.queryFeatures(t)},role:"columnheader",scope:"col"},t.alias,t.sorting?i("span",{class:"sort-icon"},i("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",class:"svg-icon"},i("path",t.ascending?{d:"M4 23v-5L16 6l12 12v5L16 11 4 23z"}:{d:"M28 9v5L16 26 4 14V9l12 12L28 9z"}))):i("div",null))))),i("tbody",null,this.features.map(t=>i("tr",{onClick:()=>this.rowSelected.emit(t)},this.headers.map(e=>i("td",null,t.attributes[e.name]&&"date"===e.type?new Date(t.attributes[e.name]).toLocaleDateString("en-US"):t.attributes[e.name])))))),i("footer",{class:"footer"},this.features.length," of ",this.count," features",i("label",null," ",i("calcite-switch",{onChange:()=>this.extentChanged(event)})," Filter By Extent")))}static get watchers(){return{extent:["extentWatchHandler"],where:["watchHandler"]}}static get style(){return"#tableDiv{overflow:auto;height:100%}body,html{width:100%;height:100%}.sort-icon{margin-left:.5em}th{background:#efefef;position:-webkit-sticky;position:sticky;top:0}td,th{overflow-wrap:break-word;white-space:normal;font-size:.775rem}.table td,.table th{min-width:100px}.header{background:#fff;position:-webkit-sticky;position:sticky;top:0;-webkit-box-shadow:0 2px 2px -1px rgba(0,0,0,.4);box-shadow:0 2px 2px -1px rgba(0,0,0,.4)}.footer{background:#fff;position:absolute;bottom:0;left:0;right:0;padding:.5em!important;font-size:.775rem;border:1px solid #ccc}input[type=checkbox]{display:none}label{float:right;margin:0!important}"}};export{o as calcite_switch,w as material_table};