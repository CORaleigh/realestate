var __awaiter=this&&this.__awaiter||function(e,r,t,n){function a(e){return e instanceof t?e:new t((function(r){r(e)}))}return new(t||(t=Promise))((function(t,i){function o(e){try{u(n.next(e))}catch(r){i(r)}}function s(e){try{u(n["throw"](e))}catch(r){i(r)}}function u(e){e.done?t(e.value):a(e.value).then(o,s)}u((n=n.apply(e,r||[])).next())}))};var __generator=this&&this.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(r){return u([e,r])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(t)try{if(n=1,a&&(i=o[0]&2?a["return"]:o[0]?a["throw"]||((i=a["return"])&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;if(a=0,i)o=[o[0]&2,i.value];switch(o[0]){case 0:case 1:i=o;break;case 4:t.label++;return{value:o[1],done:false};case 5:t.label++;a=o[1];o=[0];continue;case 7:o=t.ops.pop();t.trys.pop();continue;default:if(!(i=t.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(o[0]===6&&t.label<i[1]){t.label=i[1];i=o;break}if(i&&t.label<i[2]){t.label=i[2];t.ops.push(o);break}if(i[2])t.ops.pop();t.trys.pop();continue}o=r.call(e,t)}catch(s){o=[6,s];a=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;for(var n=Array(e),a=0,r=0;r<t;r++)for(var i=arguments[r],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n};System.register(["./p-e7818b7c.system.js"],(function(e){"use strict";var r,t,n;return{setters:[function(e){r=e.r;t=e.c;n=e.h}],execute:function(){var a=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function o(e,r){return r={exports:{}},e(r,r.exports),r.exports}var s=o((function(e,r){(function(e,t){t(r)})(a,(function(e){var r="4.13";var t="next";function n(e){if(e.toLowerCase()===t){return t}var r=e&&e.match(/^(\d)\.(\d+)/);return r&&{major:parseInt(r[1],10),minor:parseInt(r[2],10)}}function a(e){if(e===void 0){e=r}return"https://js.arcgis.com/"+e+"/"}function i(e){if(e===void 0){e=r}var i=a(e);var o=n(e);if(o!==t&&o.major===3){var s=o.minor<=10?"js/":"";return""+i+s+"esri/css/esri.css"}else{return i+"esri/themes/light/main.css"}}function o(e){var r=document.createElement("link");r.rel="stylesheet";r.href=e;return r}function s(e,r){if(r){var t=document.querySelector(r);t.parentNode.insertBefore(e,t)}else{document.head.appendChild(e)}}function u(e){return document.querySelector('link[href*="'+e+'"]')}function l(e){return!e||n(e)?i(e):e}function c(e,r){var t=l(e);var n=u(t);if(!n){n=o(t);s(n,r)}return n}var f=typeof window!=="undefined";var d={Promise:f?window["Promise"]:undefined};var h={};function v(e){var r=document.createElement("script");r.type="text/javascript";r.src=e;r.setAttribute("data-esri-loader","loading");return r}function p(e,r,t){var n;if(t){n=y(e,t)}var a=function(){r(e);e.removeEventListener("load",a,false);if(n){e.removeEventListener("error",n,false)}};e.addEventListener("load",a,false)}function y(e,r){var t=function(n){r(n.error||new Error("There was an error attempting to load "+e.src));e.removeEventListener("error",t,false)};e.addEventListener("error",t,false);return t}function m(e){if(e===void 0){e={}}h=e}function w(){return document.querySelector("script[data-esri-loader]")}function b(){var e=window["require"];return e&&e.on}function g(e){if(e===void 0){e={}}var r={};[h,e].forEach((function(e){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){r[t]=e[t]}}}));var t=r.version;var n=r.url||a(t);return new d.Promise((function(e,a){var i=w();if(i){var o=i.getAttribute("src");if(o!==n){a(new Error("The ArcGIS API for JavaScript is already loaded ("+o+")."))}else{if(b()){e(i)}else{p(i,e,a)}}}else{if(b()){a(new Error("The ArcGIS API for JavaScript is already loaded."))}else{var s=r.css;if(s){var u=s===true;c(u?t:s,r.insertCssBefore)}if(r.dojoConfig){window["dojoConfig"]=r.dojoConfig}i=v(n);p(i,(function(){i.setAttribute("data-esri-loader","loaded");e(i)}),a);document.body.appendChild(i)}}}))}function _(e){return new d.Promise((function(r,t){var n=window["require"].on("error",t);window["require"](e,(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}n.remove();r(e)}))}))}function S(e,r){if(r===void 0){r={}}if(!b()){var t=w();var n=t&&t.getAttribute("src");if(!r.url&&n){r.url=n}return g(r).then((function(){return _(e)}))}else{return _(e)}}var E={getScript:w,isLoaded:b,loadModules:S,loadScript:g,loadCss:c,setDefaultOptions:m,utils:d};e.getScript=w;e.isLoaded=b;e.loadModules=S;e.loadScript=g;e.loadCss=c;e.setDefaultOptions=m;e.utils=d;e["default"]=E;Object.defineProperty(e,"__esModule",{value:true})}))}));i(s);var u=s.loadModules;var l=e("material_table",function(){function e(e){r(this,e);this.headers=[];this.features=[];this.layer=null;this.ascending=true;this.cnt=0;this.rowSelected=t(this,"rowSelected",7)}e.prototype.queryFeatures=function(e){var r=this;debugger;var t={where:this.where,outFields:"OBJECTID,"+this.fields,num:25};if(e){this.headers.forEach((function(r){r.sorting=r.name===e.name}));t["orderByFields"]=e.name;if(!e.ascending){t["orderByFields"]+=" DESC"}}t["start"]=this.cnt*25;this.layer.queryFeatures(t).then((function(e){r.features=__spreadArrays(r.features.concat(e.features))}))};e.prototype.initializeArcGIS=function(){return __awaiter(this,void 0,void 0,(function(){var e,r,t;var n=this;return __generator(this,(function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,u(["esri/layers/FeatureLayer"])];case 1:e=a.sent()[0];r=new e({portalItem:{id:this.itemId},layerId:this.layerId});r.load().then((function(){n.layer=r;n.queryFeatures(null)}));return[3,3];case 2:t=a.sent();console.log("EsriLoader: ",t);return[3,3];case 3:return[2]}}))}))};e.prototype.componentDidLoad=function(){var e=this;this.initializeArcGIS();var r=this.fields.split(",");r.forEach((function(r){e.headers.push({name:r,ascending:false,sorting:false})}))};e.prototype.tableScrolled=function(){var e=document.getElementById("tableDiv");if(e.scrollTop+e.clientHeight>=e.scrollHeight-10){this.cnt+=1;var r=this.headers.filter((function(e){return e.sorting}));var t=null;if(r.length){t=r[0]}this.queryFeatures(t)}};e.prototype.sortFeatures=function(e){var r=this;this.ascending=!this.ascending;this.features=__spreadArrays(this.features.sort((function(t,n){var a=t.attributes[e];var i=n.attributes[e];if(!a){a=""}if(!i){i=""}if(a<i){return r.ascending?-1:1}if(a>i){return r.ascending?1:-1}return 0})))};e.prototype.render=function(){var e=this;return n("div",{id:"tableDiv",class:"mdc-data-table",onScroll:function(){e.tableScrolled()}},n("table",{class:"mdc-data-table__table"},n("thead",null,n("tr",{class:"mdc-data-table__header-row"},this.headers.map((function(r){return n("th",{onClick:function(){r.ascending=!r.ascending;e.cnt=0;e.features=[];e.queryFeatures(r)},class:"mdc-data-table__header-cell",role:"columnheader",scope:"col"},r.name,r.sorting?n("i",{class:"material-icons"},r.ascending?"arrow_upward":"arrow_downward"):n("div",null))})))),n("tbody",{class:"mdc-data-table__content"},this.features.map((function(r){return n("tr",{class:"mdc-data-table__row",onClick:function(){return e.rowSelected.emit(r)}},e.headers.map((function(e){return n("td",{class:"mdc-data-table__cell"},r.attributes[e.name])})))})))))};Object.defineProperty(e,"style",{get:function(){return".mdc-data-table,body,html{height:100%}body,html{width:100%}.mdc-data-table__cell{max-width:200px;overflow-wrap:break-word;white-space:normal}th{background:#fff;position:-webkit-sticky;position:sticky;top:0;-webkit-box-shadow:0 2px 2px -1px rgba(0,0,0,.4);box-shadow:0 2px 2px -1px rgba(0,0,0,.4)}"},enumerable:true,configurable:true});return e}())}}}));